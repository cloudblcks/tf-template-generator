- cloud: aws
  resources:
    server:
      resource: vm
      bindings:
        - direction: to
          id: s3-frontend
      params:
        aws_instance_type: t2.micro
        aws_ami: /aws/service/ami-amazon-linux-latest/amzn2-ami-hvm-x86_64-gp2
        is_public: true
        az_count: 1
        user_data: |
          \#!/bin/bash
          sudo yum update
          sudo yum install -y docker
          sudo usermod -a -G docker ec2-user
          sudo service docker start
          sudo chkconfig docker on
          useradd dockeradmin
          passwd dockeradmin
          usermod -aG docker dockeradmin
          sudo yum install -y git
          git clone https://github.com/airbytehq/airbyte.git
          cd airbyte
          docker compose up
    
    s3-frontend:
      resource: s3
      bindings:
        - direction: from
          id: server
      params:
        bucket_name: sample_frontend_01